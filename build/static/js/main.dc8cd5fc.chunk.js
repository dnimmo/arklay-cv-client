(this["webpackJsonpproject-arklay-cv"]=this["webpackJsonpproject-arklay-cv"]||[]).push([[0],{16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),s=n.n(o),i=n(2);const l=Object(a.createContext)(),c="DISPLAYING_TITLE_SCREEN",m="DISPLAYING_GAME",u=c,d="START_GAME",p=(e,t)=>{switch(t.type){case d:return m;default:return e}};var E=({children:e})=>{const t=Object(a.useReducer)(p,u),n=Object(i.a)(t,2),o=n[0],s=n[1],c={applicationState:o,startGame:Object(a.useCallback)(()=>{s({type:d})},[s])};return r.a.createElement(l.Provider,{value:c},e)};const h={padding:"10px 20px",borderRadius:"5px",backgroundColor:"darkslategrey",color:"#fafafa",fontSize:"16px",cursor:"pointer",marginBottom:"20px",border:"2px solid","&:hover":{display:"none"}};var g=({onClick:e,text:t})=>r.a.createElement("button",{onClick:e,style:h},t);const y={minHeight:"50vh",padding:"10vw",lineHeight:"26px"};var v=()=>{const e=Object(a.useContext)(l).startGame;return r.a.createElement("div",{style:y},r.a.createElement("h1",null,"Project Arklay"),r.a.createElement("p",null,"Your head hurts. You're not sure where you are, and you definitely don't know how you got here. There's rain thrashing the ground all around you. You figure you might as well try and understand what the Hell is going on..."),r.a.createElement(g,{onClick:e,text:"Start game"}))},O=n(1);const b=({room:e,itemsUsed:t})=>{const n=e.unlockRequirements;return!n||n.every(e=>t.includes(e))};var T={START:{name:"Start",intro:"It's dark, and cold. You're soaked through. You struggle to remember where you are, let alone how you ended up here. What were you doing again?",surroundings:"There's a large door in front of you.",surroundingsWhenItemPickedUp:null,surroundingsWhenItemUsed:null,item:"TEST_ITEM",availableDirections:[{text:"Enter",room:"TEST",itemsThatCanBeUsed:["TEST_ITEM"]}],descriptionWhenExamined:"This was where I found the test item",unlockRequirements:null,messageOnUnsuccessfulEntryAttempt:null},TEST:{name:"Test",intro:"Now you're inside. Well done!",surroundings:"There's a large door behind you.",surroundingsWhenItemPickedUp:null,surroundingsWhenItemUsed:null,item:null,availableDirections:[{text:"Leave",room:"START",itemsThatCanBeUsed:[]}],descriptionWhenExamined:"This place is weird.",unlockRequirements:["TEST_ITEM"],messageOnSuccessfulEntryAttempt:"You unlocked the door!",messageOnUnsuccessfulEntryAttempt:"The door is locked! Rude."}};var x={TEST_ITEM:{name:"Test item",description:"An item Nimmo is using to test items...",messageWhenUsed:"You used the thing! :)",messageWhenNotUsed:"You didn't use the thing. :("}};const I=Object(a.createContext)(),R="DISPLAYING_DIRECTIONS",C="DISPLAYING_INVENTORY",k={state:R,currentRoom:T.START,inventory:{itemsHeld:[],itemsUsed:[]},message:null},S={EXAMINE_ITEM:"EXAMINE_ITEM",EXAMINE_ROOM:"EXAMINE_ROOM",CHANGE_ROOM:"CHANGE_ROOM",SHOW_DIRECTIONS:"SHOW_DIRECTIONS",SHOW_INVENTORY:"SHOW_INVENTORY",USE_ITEM:"USE_ITEM"},N=(e,t)=>{switch(t.type){case S.HIDE_INVENTORY:return Object(O.a)({},e,{state:R,message:null});case S.SHOW_INVENTORY:return e.inventory.itemsHeld.length>0?Object(O.a)({},e,{state:C,message:null}):Object(O.a)({},e,{message:"Your inventory is empty!"});case S.CHANGE_ROOM:return b({room:T[t.payload],itemsUsed:e.inventory.itemsUsed})?Object(O.a)({},e,{currentRoom:T[t.payload],message:null}):e.inventory.itemsHeld.length>0?Object(O.a)({},e,{state:C,message:T[t.payload].messageOnUnsuccessfulEntryAttempt}):Object(O.a)({},e,{message:T[t.payload].messageOnUnsuccessfulEntryAttempt});case S.EXAMINE_ROOM:return e.currentRoom.item?(({item:e,inventory:t})=>t.itemsHeld.includes(e)||t.itemsUsed.includes(e))({item:e.currentRoom.item,inventory:e.inventory})?Object(O.a)({},e,{message:e.currentRoom.descriptionWhenExamined}):Object(O.a)({},e,{inventory:Object(O.a)({},e.inventory,{itemsHeld:e.inventory.itemsHeld.concat(e.currentRoom.item)}),message:"".concat(x[e.currentRoom.item].name," has been added to your inventory")}):Object(O.a)({},e,{message:e.currentRoom.descriptionWhenExamined});case S.USE_ITEM:return(({item:e,availableDirections:t})=>t.some(({itemsThatCanBeUsed:t})=>!!t&&t.includes(e)))({availableDirections:e.currentRoom.availableDirections,item:t.payload})?Object(O.a)({},e,{state:R,message:x[t.payload].messageWhenUsed,inventory:{itemsHeld:e.inventory.itemsHeld.filter(e=>e!==t.payload),itemsUsed:e.inventory.itemsUsed.concat(t.payload)}}):Object(O.a)({},e,{message:x[t.payload].messageWhenNotUsed});default:return e}};var f=({children:e})=>{const t=Object(a.useReducer)(N,k),n=Object(i.a)(t,2),o=n[0],s=n[1],l={gameState:o,hideInventory:Object(a.useCallback)(()=>{s({type:S.HIDE_INVENTORY})},[s]),showInventory:Object(a.useCallback)(()=>{s({type:S.SHOW_INVENTORY})},[s]),changeRoom:Object(a.useCallback)(e=>{s({type:S.CHANGE_ROOM,payload:e})},[s]),attemptToUseItem:Object(a.useCallback)(e=>{s({type:S.USE_ITEM,payload:e})},[s]),examineRoom:Object(a.useCallback)(e=>{s({type:S.EXAMINE_ROOM,payload:e})},[s])};return r.a.createElement(I.Provider,{value:l},e)},_=n(7),w=n.n(_);const U=()=>w.a.v4();const H={icon:{height:"16px",width:"auto",minWidth:"16px"},iconContainer:{backgroundColor:"#fafafa",border:"1px solid #fafafa",padding:"2px 4px",borderRadius:"50px",marginLeft:"-15px",marginTop:"-8px",position:"absolute"},direction:{minWidth:"280px",display:"inline-block"},directionsContainer:{minHeight:"35vh"}};var j=()=>{const e=r.a.useContext(I),t=e.gameState,n=e.changeRoom,a=t.currentRoom,o=t.inventory;return r.a.createElement("div",{style:H.directionsContainer},a.availableDirections.map(({text:e,room:t})=>r.a.createElement("span",{key:U(),style:H.direction},r.a.createElement(g,{onClick:()=>n(t),text:e}),!b({room:T[t],itemsUsed:o.itemsUsed})&&r.a.createElement("span",{style:H.iconContainer},r.a.createElement("img",{src:"./images/locked.svg",alt:"a locked padlock",style:H.icon})))))};const A={inventoryOuter:{height:"65vh",position:"fixed",top:"0",width:"100vw",backgroundColor:"rgba(0,0,0,0.3)"},inventoryContainer:{minHeight:"35vh",position:"fixed",bottom:"0",width:"100vw",borderTop:"2px solid #fafafa",padding:"10vh",backgroundColor:"slategrey"},closeButton:{position:"absolute",top:"2vh",right:"2vh"}};var M=()=>{const e=r.a.useContext(I),t=e.gameState,n=e.attemptToUseItem,a=e.hideInventory,o=t.inventory,s=t.message;return r.a.createElement("div",{style:A.inventoryOuter},r.a.createElement("div",{style:A.inventoryContainer},o.itemsHeld.map(e=>r.a.createElement(g,{onClick:()=>n(e),text:x[e].name,key:U()})),r.a.createElement("span",{style:A.closeButton},r.a.createElement(g,{onClick:a,text:"X"})),s&&r.a.createElement("p",null,s)))};const W={backgroundColor:"rgba(255,0,0,0.7)",padding:"20px",color:"white",borderRadius:"5px",boxShadow:"5px 5px 5px rgba(0,0,0,0.3)"};var Y=({description:e})=>r.a.createElement("div",{style:W},r.a.createElement("h1",null,"Something has gone wrong"),r.a.createElement("p",null,e));const D={minHeight:"45vh",padding:"5vh 20vw"};var G=()=>{const e=r.a.useContext(I).gameState.currentRoom;return r.a.createElement("div",{style:D},r.a.createElement("p",null,e.intro),r.a.createElement("p",null,e.surroundings))};const P=e=>({marginLeft:"20px",opacity:e>0?"1":"0.5"});var L=()=>{const e=r.a.useContext(I),t=e.gameState,n=e.showInventory,a=e.examineRoom,o=t.state,s=t.message,i=t.inventory,l=t.currentRoom;return r.a.createElement("div",null,r.a.createElement(G,null),(e=>{switch(e){case R:return r.a.createElement("section",null,r.a.createElement(j,null),r.a.createElement(g,{onClick:()=>a(l),text:"Examine room"}),r.a.createElement("span",{style:P(i.itemsHeld.length)},r.a.createElement(g,{onClick:n,text:"Inventory"})));case C:return r.a.createElement("section",null,r.a.createElement(j,null),r.a.createElement(M,null));default:return r.a.createElement(Y,{description:"Game ended up in an unexpected state"})}})(o),s&&r.a.createElement("p",null,s))};var B=()=>r.a.createElement(f,null,r.a.createElement(L,null));var V=()=>{switch(r.a.useContext(l).applicationState){case c:return r.a.createElement(v,null);case m:return r.a.createElement(B,null);default:return r.a.createElement(Y,{description:"Application has ended up in an unexpected state"})}};const X={minHeight:"100vh"};var q=()=>r.a.createElement(E,null,r.a.createElement(V,{style:X}));const J=document.getElementById("root");s.a.render(r.a.createElement(q,null),J)},8:function(e,t,n){e.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.dc8cd5fc.chunk.js.map